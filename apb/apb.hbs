namespace eval vhdl::amba::apb {
	namespace eval pkg {
		proc src {} {
			hbs::SetLib "apb"
			hbs::SetStd "2019"
			hbs::AddFile apb.vhd
		}

		proc _tb {top} {
			hbs::SetTool "nvc"
			hbs::SetPostElaborationCallback hbs::SetArgsPrefix "--messages=compact"
			hbs::SetTop $top
			src
			hbs::SetLib ""
		}

		# Testbench for protection_t functions.
		proc tb-prot-funcs {} {
			_tb "tb_prot_funcs"
			hbs::AddFile tb/tb-prot-funcs.vhd
			hbs::Run
		}
		hbs::Register
	}

	namespace eval checker {
		proc src {} {
			hbs::SetLib "apb"
			hbs::SetStd "2019"
			hbs::AddFile checker.vhd
		}

		hbs::Register
	}
}
